(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{25:function(e,t,n){e.exports=n(38)},26:function(e,t,n){},31:function(e,t,n){e.exports=n.p+"static/media/dogs.0e7c393f.jpg"},38:function(e,t,n){"use strict";n.r(t);n(26);var a,o=n(0),r=n.n(o),l=n(20),c=n.n(l),i=n(8),s=n(9),u=n(11),p=n(10),d=n(12),h=n(5),f=function(){return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",null,"Get-A-Pet"))},m=function(e){return r.a.createElement("div",{className:"landing-Page"},r.a.createElement("section",{className:"app-description"},"Every pet deserves a forever home. With Get-A-Pet, you can bring home a fur friend that will bring both of you an endless amount of happiness. "),r.a.createElement("section",{className:"app-description"},"Just get in line and when you get to the front you will be able to choose which pet to bring home with you. Click the button below to get started."),r.a.createElement("img",{className:"landing-image",src:n(31),alt:"cute dogs"}),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.history.push("/adopt")}},"Adopt a Pet!"))},E=n(15),g=n.n(E),b=n(24),v=n(21),O={REACT_APP_API_BASE:"https://peaceful-reaches-89913.herokuapp.com"},y=function(e){var t=e.age,n=e.breed,a=e.description,o=e.gender,l=e.imageURL,c=e.name,i=e.story,s=e.whichPet;return r.a.createElement("div",{className:"pet-container"},r.a.createElement("ul",null,r.a.createElement("li",null,"Name: ",c),r.a.createElement("li",null,r.a.createElement("img",{className:"pet-image",src:l,alt:a})),r.a.createElement("li",null,"Age: ",t),r.a.createElement("li",null,"Breed: ",n),r.a.createElement("li",null,"Description: ",a),r.a.createElement("li",null,"Gender: ",o),r.a.createElement("li",null,"Story: ",i),!0===e.frontOfLine&&r.a.createElement("button",{onClick:function(){return e.handleAdopt(s)}},"Adopt me!")))},P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={people:[],cat:null,dog:null,adopter:null,adopted:null,frontOfLine:!1,error:null},n.fetchPeopleQueue=function(){fetch("".concat(O.API_ENDPOINT,"/people")).then((function(e){return e.json()})).then((function(e){return n.setState({people:e})})).catch((function(e){return n.setState({error:e})}))},n.fetchAdoptablePets=function(){fetch("".concat(O.API_ENDPOINT,"/pets")).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({cat:e[0],dog:e[1]})})).catch((function(e){return n.setState({error:e})}))},n.handleJoinQueue=function(){var e=Object(v.a)(g.a.mark((function e(t){var o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==n.state.people.length){e.next=4;break}return e.next=4,n.fetchPeopleQueue();case 4:o=t.target.adopt.value,fetch("".concat(O.API_ENDPOINT,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:o})}).then((function(e){return e.json()})).then((function(){n.setState({adopter:o,people:[].concat(Object(b.a)(n.state.people),[o])},(function(){a=setInterval((function(){return n.adoptPet()}),5e3)}))})).then((function(){n.state.adopter===n.state.people[0]&&(clearInterval(a),n.setState({frontOfLine:!0}))})).catch((function(e){return n.setState({error:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.adoptPet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n.state.people[0]===n.state.adopter||0===n.state.people.length)clearInterval(a),n.state.people[0]===n.state.adopter&&n.setState({frontOfLine:!0});else switch(e){case"cat":n.handleAdopt("cat");break;case"dog":n.handleAdopt("dog");break;default:n.handleAdopt("dog")}},n.handleAdopt=function(e){fetch("".concat(O.API_ENDPOINT,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({name:n.state.people[0],whichPet:e})}).then((function(){n.state.people[0]===n.state.adopter&&n.setState({adopted:n.state[e]});var t=n.state.people;t.shift(),fetch("".concat(O.API_ENDPOINT,"/pets")).then((function(e){return e.json()})).then((function(e){return t[0]===n.state.adopter?n.handleClearInterval(e,t):n.setState({cat:e[0],dog:e[1],people:t,frontOfLine:!1})})).catch((function(e){return n.setState({error:e})}))})).catch((function(e){return n.setState({error:e})}))},n.handleClearInterval=function(e,t){clearInterval(a),n.setState({cat:e[0],dog:e[1],people:t,frontOfLine:!0})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchPeopleQueue(),this.fetchAdoptablePets()}},{key:"render",value:function(){var e,t=this;return e=this.state.people.length>0?this.state.people.map((function(e,t){return r.a.createElement("li",{key:t},e)})):{},r.a.createElement("div",{className:"adoption-page-container"},this.state.adopted&&r.a.createElement("div",null,"You've adopted ",this.state.adopted.name),r.a.createElement("div",{className:"pets-container"},this.state.cat&&r.a.createElement(y,Object.assign({key:1,whichPet:"cat",handleAdopt:this.handleAdopt,frontOfLine:this.state.frontOfLine},this.state.cat)),this.state.dog&&r.a.createElement(y,Object.assign({key:2,whichPet:"dog",handleAdopt:this.handleAdopt,frontOfLine:this.state.frontOfLine},this.state.dog))),this.state.people.includes(this.state.adopter)?r.a.createElement("div",null,"You are number ".concat(this.state.people.findIndex((function(e){return e===t.state.adopter}))+1," in line"),r.a.createElement("ol",null,e)):r.a.createElement("form",{className:"adopt-form",onSubmit:function(e){return t.handleJoinQueue(e)}},r.a.createElement("legend",{hidden:!0},"Adoption Form"),r.a.createElement("fieldset",null,r.a.createElement("div",null,r.a.createElement("label",{id:"adopt",name:"adopt"},"Type your name to get in line to adopt a pet")),r.a.createElement("div",null,r.a.createElement("input",{htmlFor:"adopt",id:"adopt",name:"adopt"})),r.a.createElement("button",null,"Get in Line"))))}}]),t}(r.a.Component),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={adopted:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement("main",null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:function(e){return r.a.createElement(m,e)}}),r.a.createElement(h.a,{exact:!0,path:"/adopt",component:function(t){return r.a.createElement(P,Object.assign({handleCongratulations:e.handleCongratulations},t))}}))))}}]),t}(r.a.Component),N=n(14);c.a.render(r.a.createElement(N.a,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.354262fa.chunk.js.map